import{w as _,e as G,t as q,v as K,d as A,a6 as J,r as f,P as D,g as Q,a as T,m as X,o as Y,p as Z,s as ee,b as te,a7 as ae,a8 as I,a9 as ne,aa as re,ab as M,ac as oe,ad as se,ae as ie,af as le,a0 as b,a1 as U,a3 as s,a5 as x,a4 as L,a2 as H,B as w,ag as ue,ah as v,ai as z,aj as ce,ak as fe,al as de,am as he,an as pe}from"./index-fcef34bf.js";function B(t){var r,n=function(o){return function(){r=null,t.apply(void 0,G(o))}},e=function(){if(r==null){for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];r=_(n(i))}};return e.cancel=function(){_.cancel(r),r=null},e}var me=function(r){var n=r.componentCls;return A({},n,{position:"fixed",zIndex:r.zIndexPopup})};const ve=q("Affix",function(t){var r=K(t,{zIndexPopup:t.zIndexBase+10});return[me(r)]});function y(t){return t!==window?t.getBoundingClientRect():{top:0,bottom:window.innerHeight}}function k(t,r,n){if(n!==void 0&&r.top>t.top-n)return n+r.top}function E(t,r,n){if(n!==void 0&&r.bottom<t.bottom+n){var e=window.innerHeight-r.bottom;return n+e}}var W=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"],S=[];function R(t,r){if(t){var n=S.find(function(e){return e.target===t});n?n.affixList.push(r):(n={target:t,affixList:[r],eventHandlers:{}},S.push(n),W.forEach(function(e){n.eventHandlers[e]=J(t,e,function(){n.affixList.forEach(function(a){a.lazyUpdatePosition()})})}))}}function O(t){var r=S.find(function(n){var e=n.affixList.some(function(a){return a===t});return e&&(n.affixList=n.affixList.filter(function(a){return a!==t})),e});r&&r.affixList.length===0&&(S=S.filter(function(n){return n!==r}),W.forEach(function(n){var e=r.eventHandlers[n];e&&e.remove&&e.remove()}))}function be(){return typeof window<"u"?window:null}var g;(function(t){t[t.None=0]="None",t[t.Prepare=1]="Prepare"})(g||(g={}));var j=function(t){X(n,t);var r=Y(n);function n(){var e;return Z(this,n),e=r.apply(this,arguments),e.state={status:g.None,lastAffix:!1,prevTarget:null},e.getOffsetTop=function(){var a=e.props,o=a.offsetBottom,i=a.offsetTop;return o===void 0&&i===void 0?0:i},e.getOffsetBottom=function(){return e.props.offsetBottom},e.savePlaceholderNode=function(a){e.placeholderNode=a},e.saveFixedNode=function(a){e.fixedNode=a},e.measure=function(){var a=e.state,o=a.status,i=a.lastAffix,l=e.props.onChange,d=e.getTargetFunc();if(!(o!==g.Prepare||!e.fixedNode||!e.placeholderNode||!d)){var u=e.getOffsetTop(),c=e.getOffsetBottom(),m=d();if(m){var h={status:g.None},C=y(m),p=y(e.placeholderNode),N=k(p,C,u),F=E(p,C,c);p.top===0&&p.left===0&&p.width===0&&p.height===0||(N!==void 0?(h.affixStyle={position:"fixed",top:N,width:p.width,height:p.height},h.placeholderStyle={width:p.width,height:p.height}):F!==void 0&&(h.affixStyle={position:"fixed",bottom:F,width:p.width,height:p.height},h.placeholderStyle={width:p.width,height:p.height}),h.lastAffix=!!h.affixStyle,l&&i!==h.lastAffix&&l(h.lastAffix),e.setState(h))}}},e.prepareMeasure=function(){e.setState({status:g.Prepare,affixStyle:void 0,placeholderStyle:void 0})},e.updatePosition=B(function(){e.prepareMeasure()}),e.lazyUpdatePosition=B(function(){var a=e.getTargetFunc(),o=e.state.affixStyle;if(a&&o){var i=e.getOffsetTop(),l=e.getOffsetBottom(),d=a();if(d&&e.placeholderNode){var u=y(d),c=y(e.placeholderNode),m=k(c,u,i),h=E(c,u,l);if(m!==void 0&&o.top===m||h!==void 0&&o.bottom===h)return}}e.prepareMeasure()}),e}return ee(n,[{key:"getTargetFunc",value:function(){var a=this.context.getTargetContainer,o=this.props.target;return o!==void 0?o:a??be}},{key:"componentDidMount",value:function(){var a=this,o=this.getTargetFunc();o&&(this.timeout=setTimeout(function(){R(o(),a),a.updatePosition()}))}},{key:"componentDidUpdate",value:function(a){var o=this.state.prevTarget,i=this.getTargetFunc(),l=(i==null?void 0:i())||null;o!==l&&(O(this),l&&(R(l,this),this.updatePosition()),this.setState({prevTarget:l})),(a.offsetTop!==this.props.offsetTop||a.offsetBottom!==this.props.offsetBottom)&&this.updatePosition(),this.measure()}},{key:"componentWillUnmount",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),O(this),this.updatePosition.cancel(),this.lazyUpdatePosition.cancel()}},{key:"render",value:function(){var a,o=this.state,i=o.affixStyle,l=o.placeholderStyle,d=this.props,u=d.affixPrefixCls,c=d.rootClassName,m=d.children,h=te((a={},A(a,c,!!i),A(a,u,!!i),a)),C=ae(this.props,["prefixCls","offsetTop","offsetBottom","target","onChange","affixPrefixCls","rootClassName"]);return f.createElement(I,{onResize:this.updatePosition},f.createElement("div",T({},C,{ref:this.savePlaceholderNode}),i&&f.createElement("div",{style:l,"aria-hidden":"true"}),f.createElement("div",{className:h,ref:this.saveFixedNode,style:i},f.createElement(I,{onResize:this.updatePosition},m))))}}]),n}(f.Component);j.contextType=D;var ge=f.forwardRef(function(t,r){var n=t.prefixCls,e=f.useContext(D),a=e.getPrefixCls,o=a("affix",n),i=ve(o),l=Q(i,2),d=l[0],u=l[1],c=T(T({},t),{affixPrefixCls:o,rootClassName:u});return d(f.createElement(j,T({},c,{ref:r})))});const xe=ge,Se=t=>t.suburbs,Ce=ne(Se,t=>Object.keys(t).map((r,n)=>({name:r,id:n}))),V=()=>re(Ce),ye=()=>{const t=M();return f.useCallback(r=>t(oe(r)),[t])},Te=()=>{const t=M();return f.useCallback(r=>t(se(r)),[t])},{Column:P}=L;function we({filterSuburb:t="",filterLocation:r=""}){const[n,e]=f.useState(t),[a,o]=f.useState(r),i=ie(),l=le(),d=i.filter(({name:u,suburb:c})=>u.toLowerCase().includes(a.toLowerCase())&&c.toLowerCase().includes(n.toLowerCase()));return b(U,{children:[s(x.Search,{placeholder:"Search locations",onChange:u=>o(u.target.value),value:a}),s(x.Search,{placeholder:"Search suburbs",onChange:u=>e(u.target.value),value:n}),b(L,{dataSource:d,children:[s(P,{title:"Location",sorter:(u,c)=>u.name.localeCompare(c.name),render:(u,{name:c,type:m})=>`${c} ${m}`},"location"),s(P,{title:"Suburb",dataIndex:"suburb",sorter:(u,c)=>u.suburb.localeCompare(c.suburb)},"suburb"),s(P,{title:"Action",render:(u,c)=>s(H,{size:"middle",children:s(w,{onClick:()=>l(c),children:"Remove"})})})]})]})}function Le({form:t,close:r}){const n=ue(),e=V();return b(v,{form:t,onFinish:o=>{n(o),r()},children:[s(v.Item,{label:"Name",name:"name",children:s(x,{})}),s(v.Item,{label:"Type",name:"type",children:s(x,{})}),s(v.Item,{label:"Suburb",name:"suburb",children:s(z,{children:e.map(o=>s(z.Option,{value:o.name,children:o.name},o.name))})})]})}const{Column:$}=L;function Pe({filterPrefix:t=""}){const[r,n]=f.useState(""),e=V(),a=Te(),o=e.filter(({name:i})=>i.toLowerCase().includes(r.toLowerCase())&&(t===""||i.startsWith(t)));return b(U,{children:[s(x.Search,{placeholder:"Search suburbs",onChange:i=>n(i.target.value),value:r,style:{maxWidth:"100%",marginBottom:16}}),b(L,{dataSource:o,children:[s($,{title:"Name",dataIndex:"name",sorter:(i,l)=>i.name.localeCompare(l.name)},"name"),s($,{title:"Action",render:(i,{name:l})=>s(H,{size:"middle",children:s(w,{onClick:()=>a(l),children:"Remove"})})})]})]})}function Ae({form:t,close:r}){const n=ye();return s(v,{form:t,onFinish:a=>{console.log(a.name),n(a.name),r()},children:s(v.Item,{label:"Name",name:"name",children:s(x,{})})})}const Fe=()=>{const[t,r]=f.useState("suburbs"),[n,e]=f.useState(!1),[a]=v.useForm(),o=d=>{r(d)},i=()=>{e(!1)},l=()=>{a.resetFields(),e(!0)};return b("div",{children:[s(ce,{activeKey:t,onChange:o,items:[{key:"suburbs",label:"Suburbs",children:s(Pe,{})},{key:"locations",label:"Locations",children:s(we,{})},{key:"addresses",label:"Addresses",children:s(fe,{})}],size:"large",destroyInactiveTabPane:!0,tabBarExtraContent:s(w,{type:"primary",onClick:l,children:"Import"}),tabPosition:"top"}),b(de,{open:n,onCancel:i,onOk:a.submit,destroyOnClose:!0,children:[t==="suburbs"&&s(Ae,{form:a,close:()=>e(!1)}),t==="locations"&&s(Le,{form:a,close:()=>e(!1)}),t==="addresses"&&s(he,{form:a,close:()=>e(!1)})]}),s(xe,{style:{position:"absolute",bottom:50,right:4},children:s(w,{type:"primary",shape:"circle",size:"large",icon:s(pe,{}),onClick:l})})]})};export{Fe as default};
